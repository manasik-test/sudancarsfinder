<!DOCTYPE html>
<html dir="rtl" lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù†Ø¸Ø§Ù… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --success: #059669;
            --bg: #ffffff;
            --bg-light: #f8f9fa;
            --text-dark: #1f2937;
            --text-gray: #6b7280;
            --border: #e5e7eb;
            --facebook: #1877f2;
        }
        
        body { 
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif; 
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }
        
        /* Header */
        .header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 25px 20px;
            text-align: center;
        }
        
        .logo {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .subtitle {
            font-size: 14px;
            opacity: 0.9;
        }
        
        /* Stats */
        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            padding: 20px;
            background: white;
            margin: -20px 15px 0;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
        }
        
        .stat {
            text-align: center;
            padding: 10px;
        }
        
        .stat-num {
            display: block;
            font-size: 28px;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stat-label {
            display: block;
            font-size: 12px;
            color: var(--text-gray);
        }
        
        /* Container */
        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 0 15px 20px;
        }
        
        /* Section */
        .section {
            background: white;
            border-radius: 15px;
            padding: 25px 20px;
            margin: 20px 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }
        
        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: var(--text-dark);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Search Form */
        .search-type {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .type-btn {
            padding: 14px;
            background: var(--bg-light);
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .type-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 18px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            font-size: 14px;
            color: var(--text-dark);
        }
        
        .form-input {
            width: 100%;
            padding: 14px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .helper-text {
            font-size: 13px;
            color: var(--text-gray);
            margin-top: 5px;
        }
        
        .helper-error {
            color: #dc2626;
        }
        
        .helper-success {
            color: var(--success);
        }
        
        /* Auto-complete */
        .autocomplete {
            position: relative;
        }
        
        .autocomplete-items {
            position: absolute;
            border: 2px solid var(--border);
            border-top: none;
            border-radius: 0 0 10px 10px;
            z-index: 99;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 200px;
            overflow-y: auto;
            background: white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.15);
        }
        
        .autocomplete-items div {
            padding: 12px;
            cursor: pointer;
            border-bottom: 1px solid var(--bg-light);
            font-size: 15px;
        }
        
        .autocomplete-items div:hover {
            background-color: var(--bg-light);
        }
        
        .autocomplete-active {
            background-color: var(--primary) !important;
            color: white;
        }
        
        /* Button */
        .btn {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn:disabled {
            background: #cbd5e1;
            cursor: not-allowed;
        }
        
        .btn-secondary {
            background: var(--success);
        }
        
        /* How it Works */
        .steps {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .step {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            padding: 15px;
            background: var(--bg-light);
            border-radius: 10px;
        }
        
        .step-icon {
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .step-text {
            flex: 1;
        }
        
        .step-title {
            font-weight: 600;
            margin-bottom: 3px;
            font-size: 15px;
        }
        
        .step-desc {
            font-size: 14px;
            color: var(--text-gray);
        }
        
        .time-note {
            background: #dbeafe;
            color: #1e40af;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
            font-weight: 600;
        }
        
        /* Testimonials */
        .testimonials {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .testimonial {
            background: var(--bg-light);
            padding: 20px;
            border-radius: 12px;
            border-right: 4px solid var(--success);
        }
        
        .testimonial-icon {
            font-size: 24px;
            margin-bottom: 10px;
        }
        
        .testimonial-text {
            font-size: 15px;
            line-height: 1.6;
            margin-bottom: 12px;
            color: var(--text-dark);
        }
        
        .testimonial-author {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            color: var(--text-gray);
        }
        
        .testimonial-name {
            font-weight: 600;
            color: var(--text-dark);
        }
        
        /* FAQ */
        .faq-item {
            border-bottom: 1px solid var(--border);
            padding: 15px 0;
        }
        
        .faq-item:last-child {
            border-bottom: none;
        }
        
        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
            color: var(--text-dark);
            padding: 5px 0;
        }
        
        .faq-icon {
            font-size: 20px;
            transition: transform 0.3s;
            color: var(--primary);
        }
        
        .faq-item.active .faq-icon {
            transform: rotate(180deg);
        }
        
        .faq-answer {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            font-size: 14px;
            color: var(--text-gray);
            line-height: 1.6;
        }
        
        .faq-item.active .faq-answer {
            max-height: 200px;
            padding-top: 10px;
        }
        
        /* Privacy */
        .privacy-note {
            background: #f0fdf4;
            border: 2px solid var(--success);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            font-size: 14px;
            color: #166534;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        /* Result */
        .result {
            display: none;
            margin-top: 20px;
            padding: 20px;
            border-radius: 12px;
            animation: slideIn 0.3s;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .result-found {
            background: #d1fae5;
            border: 2px solid var(--success);
        }
        
        .result-found h3 {
            color: #065f46;
            margin-bottom: 15px;
            font-size: 18px;
        }
        
        .result-details {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .result-details div {
            padding: 10px 0;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            font-size: 15px;
        }
        
        .result-details div:last-child {
            border-bottom: none;
        }
        
        .result-label {
            color: var(--text-gray);
        }
        
        .result-value {
            font-weight: bold;
            color: var(--text-dark);
        }
        
        .result-not-found {
            background: #fff3cd;
            border: 2px solid #ffc107;
        }
        
        .result-not-found h3 {
            color: #856404;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .register-form {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        /* Footer */
        .footer {
            background: var(--text-dark);
            color: white;
            padding: 30px 20px 20px;
            margin-top: 30px;
        }
        
        .footer-content {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }
        
        .facebook-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            background: var(--facebook);
            color: white;
            padding: 12px 30px;
            border-radius: 10px;
            text-decoration: none;
            font-weight: bold;
            font-size: 16px;
            margin: 20px 0;
            transition: all 0.3s;
        }
        
        .facebook-btn:active {
            transform: scale(0.98);
        }
        
        .facebook-icon {
            font-size: 24px;
        }
        
        .copyright {
            font-size: 13px;
            color: #9ca3af;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #374151;
        }
        
        /* Popup */
        .popup-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
            padding: 20px;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .popup-box {
            background: white;
            padding: 30px 25px;
            border-radius: 20px;
            max-width: 400px;
            width: 100%;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            animation: slideUp 0.3s;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .popup-icon {
            font-size: 60px;
            margin-bottom: 15px;
        }
        
        .popup-title {
            color: var(--success);
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .popup-message {
            color: var(--text-gray);
            margin-bottom: 15px;
            line-height: 1.6;
            font-size: 15px;
        }
        
        .popup-phone {
            background: var(--bg-light);
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: bold;
            color: var(--text-dark);
        }
        
        .popup-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 14px 40px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .popup-btn:active {
            transform: scale(0.98);
        }
        
        /* Loading */
        .loading {
            display: none;
            text-align: center;
            padding: 30px;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            margin: 0 auto 15px;
            border: 5px solid var(--bg-light);
            border-top: 5px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: var(--text-gray);
            font-size: 15px;
        }
    </style>
</head>
<body>

<!-- Header -->
<div class="header">
    <div class="logo">ğŸš—</div>
    <div class="title">Ù†Ø¸Ø§Ù… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©</div>
    <div class="subtitle">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙŠØ§Ø±ØªÙƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ£Ù…Ø§Ù†</div>
</div>

<!-- Stats -->
<div class="stats">
    <div class="stat">
        <span class="stat-num">2.5K</span>
        <span class="stat-label">Ù…ÙØ³ØªØ±Ø¬Ø¹</span>
    </div>
    <div class="stat">
        <span class="stat-num">450</span>
        <span class="stat-label">Ù†Ø´Ø·</span>
    </div>
    <div class="stat">
        <span class="stat-num">92%</span>
        <span class="stat-label">Ù†Ø¬Ø§Ø­</span>
    </div>
</div>

<div class="container">
    <!-- Search Section -->
    <div class="section">
        <h2 class="section-title">ğŸ” Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙŠØ§Ø±ØªÙƒ</h2>
        
        <div class="search-type">
            <div class="type-btn active" onclick="setSearchType('chassis')">ğŸ”¢ Ø±Ù‚Ù… Ø´Ø§Ø³ÙŠ</div>
            <div class="type-btn" onclick="setSearchType('plate')">ğŸš— Ø±Ù‚Ù… Ù„ÙˆØ­Ø©</div>
        </div>
        
        <div class="form-group">
            <label class="form-label" id="numberLabel">Ø£Ø¯Ø®Ù„ Ø¢Ø®Ø± 4 Ø£Ø±Ù‚Ø§Ù… Ù…Ù† Ø§Ù„Ø´Ø§Ø³ÙŠ</label>
            <input type="text" class="form-input" id="numberInput" placeholder="1234" maxlength="4">
            <div class="helper-text helper-error" id="numberHelper">âš ï¸ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ 4 Ø£Ø±Ù‚Ø§Ù… Ø¨Ø§Ù„Ø¶Ø¨Ø·</div>
        </div>
        
        <div class="form-group">
            <label class="form-label">Ø±Ù‚Ù… ØªÙ„ÙÙˆÙ†Ùƒ</label>
            <input type="tel" class="form-input" id="phoneInput" placeholder="0912345678">
            <div class="helper-text">Ù„Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ Ø¹Ù†Ø¯ Ø¥ÙŠØ¬Ø§Ø¯ Ø§Ù„Ø³ÙŠØ§Ø±Ø©</div>
        </div>
        
        <button class="btn" id="searchBtn" onclick="startSearch()" disabled>
            ğŸ” Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø­Ø«
        </button>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div class="loading-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...</div>
        </div>
        
        <!-- Result Found -->
        <div class="result result-found" id="resultFound">
            <h3>âœ… ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ø±Ø©!</h3>
            <div class="result-details" id="carDetails"></div>
            <div style="background: #dbeafe; padding: 12px; border-radius: 8px; color: #1e40af; font-size: 14px;">
                ğŸ“ <strong>Ø³Ù†ØªÙˆØ§ØµÙ„ Ù…Ø¹Ø§Ùƒ Ù‚Ø±ÙŠØ¨Ø§Ù‹ Ù„Ø¥Ø«Ø¨Ø§Øª Ø§Ù„Ù…Ù„ÙƒÙŠØ©</strong>
            </div>
        </div>
        
        <!-- Result Not Found -->
        <div class="result result-not-found" id="resultNotFound">
            <h3>ğŸ” Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù„Ù… ØªØ¸Ù‡Ø± Ø¨Ø¹Ø¯</h3>
            <p style="color: #856404; margin-bottom: 15px; font-size: 14px;">Ø³Ø§Ø¹Ø¯Ù†Ø§ Ø¨ØªØ³Ø¬ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª Ø³ÙŠØ§Ø±ØªÙƒ Ø¹Ø´Ø§Ù† Ù†Ø®Ø·Ø±Ùƒ ÙÙˆØ± Ø¸Ù‡ÙˆØ±Ù‡Ø§:</p>
            
            <div class="register-form">
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ù…Ø§Ø±ÙƒØ©</label>
                    <div class="autocomplete">
                        <input type="text" class="form-input" id="brandInput" placeholder="Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒØªØ§Ø¨Ø©... (Ù…Ø«Ø§Ù„: ØªÙˆÙŠÙˆØªØ§)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</label>
                    <div class="autocomplete">
                        <input type="text" class="form-input" id="modelInput" placeholder="Ø§Ø¨Ø¯Ø£ Ø§Ù„ÙƒØªØ§Ø¨Ø©... (Ù…Ø«Ø§Ù„: ÙƒÙˆØ±ÙˆÙ„Ø§)">
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø³ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„</label>
                    <input type="text" class="form-input" id="fullChassisInput" placeholder="Ø£Ø¯Ø®Ù„ Ø¢Ø®Ø± 6 Ø£Ø±Ù‚Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„" maxlength="17">
                    <div class="helper-text">ÙŠÙÙØ¶Ù„ ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø±Ù‚Ù… ÙƒØ§Ù…Ù„Ø§Ù‹ØŒ Ø£Ùˆ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ Ø¢Ø®Ø± 6 Ø£Ø±Ù‚Ø§Ù…</div>
                </div>
                
                <button class="btn btn-secondary" onclick="registerRequest()">ğŸ“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</button>
            </div>
        </div>
    </div>
    
    <!-- How it Works -->
    <div class="section">
        <h2 class="section-title">ğŸ“‹ ÙƒÙŠÙ ÙŠØ¹Ù…Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…ØŸ</h2>
        <div class="steps">
            <div class="step">
                <div class="step-icon">1ï¸âƒ£</div>
                <div class="step-text">
                    <div class="step-title">Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø³ÙŠ</div>
                    <div class="step-desc">Ø¢Ø®Ø± 4 Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø· ÙƒØ§ÙÙŠØ©</div>
                </div>
            </div>
            <div class="step">
                <div class="step-icon">2ï¸âƒ£</div>
                <div class="step-text">
                    <div class="step-title">Ø³Ù†Ø¨Ø­Ø« ÙÙŠ Ù‚Ø§Ø¹Ø¯ØªÙ†Ø§</div>
                    <div class="step-desc">Ù†Ø·Ø§Ø¨Ù‚ Ø§Ù„Ø±Ù‚Ù… Ù…Ø¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª Ø§Ù„Ù…Ø³Ø¬Ù„Ø©</div>
                </div>
            </div>
            <div class="step">
                <div class="step-icon">3ï¸âƒ£</div>
                <div class="step-text">
                    <div class="step-title">Ù†Ø®Ø·Ø±Ùƒ ÙÙˆØ±Ø§Ù‹</div>
                    <div class="step-desc">Ø±Ø³Ø§Ù„Ø© Ø£Ùˆ Ø§ØªØµØ§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¸Ù‡ÙˆØ±</div>
                </div>
            </div>
        </div>
        <div class="time-note">â±ï¸ Ø®Ù„Ø§Ù„ 24-48 Ø³Ø§Ø¹Ø© Ø¹Ø§Ø¯Ø©Ù‹</div>
    </div>
    
    <!-- Testimonials -->
    <div class="section">
        <h2 class="section-title">ğŸ’¬ Ù‚ØµØµ Ù†Ø¬Ø§Ø­</h2>
        <div class="testimonials">
            <div class="testimonial">
                <div class="testimonial-icon">âœ¨</div>
                <div class="testimonial-text">"Ù„Ù‚ÙŠØª Ø³ÙŠØ§Ø±ØªÙŠ Ø¨Ø¹Ø¯ ÙŠÙˆÙ…ÙŠÙ† ÙÙ‚Ø· Ù…Ù† Ø§Ù„ØªØ³Ø¬ÙŠÙ„! Ø§Ù„Ø­Ù…Ø¯ Ù„Ù„Ù‡"</div>
                <div class="testimonial-author">
                    <span>ğŸ‘¤</span>
                    <span class="testimonial-name">Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯</span>
                    <span>â€¢</span>
                    <span>ğŸ“ Ø§Ù„Ø®Ø±Ø·ÙˆÙ…</span>
                </div>
            </div>
            
            <div class="testimonial">
                <div class="testimonial-icon">â­</div>
                <div class="testimonial-text">"Ù†Ø¸Ø§Ù… Ø³Ù‡Ù„ ÙˆØ³Ø±ÙŠØ¹ØŒ Ù…Ø§ Ø§Ø­ØªØ¬Øª Ø£ÙŠ Ù…Ø³Ø§Ø¹Ø¯Ø©"</div>
                <div class="testimonial-author">
                    <span>ğŸ‘¤</span>
                    <span class="testimonial-name">ÙØ§Ø·Ù…Ø© Ø¹Ù„ÙŠ</span>
                    <span>â€¢</span>
                    <span>ğŸ“ Ø£Ù… Ø¯Ø±Ù…Ø§Ù†</span>
                </div>
            </div>
            
            <div class="testimonial">
                <div class="testimonial-icon">ğŸ‰</div>
                <div class="testimonial-text">"Ø§Ø³ØªØ±Ø¬Ø¹Øª Ø³ÙŠØ§Ø±ØªÙŠ Ø§Ù„Ù„ÙŠ Ø§Ù†Ø³Ø±Ù‚Øª Ù…Ù† ÙˆØ¯ Ù…Ø¯Ù†ÙŠ"</div>
                <div class="testimonial-author">
                    <span>ğŸ‘¤</span>
                    <span class="testimonial-name">Ø¹Ù…Ø± Ø­Ø³Ù†</span>
                    <span>â€¢</span>
                    <span>ğŸ“ ÙˆØ¯ Ù…Ø¯Ù†ÙŠ</span>
                </div>
            </div>
            
            <div class="testimonial">
                <div class="testimonial-icon">ğŸ’¯</div>
                <div class="testimonial-text">"Ø´ÙƒØ±Ø§Ù‹ Ø¬Ø²ÙŠÙ„Ø§Ù‹ØŒ Ø³ÙŠØ§Ø±Ø© Ø£Ø¨ÙˆÙŠ Ø±Ø¬Ø¹Øª Ø¨ÙØ¶Ù„ Ø§Ù„Ù†Ø¸Ø§Ù…"</div>
                <div class="testimonial-author">
                    <span>ğŸ‘¤</span>
                    <span class="testimonial-name">Ø³Ø§Ø±Ø© Ù…Ø­Ù…ÙˆØ¯</span>
                    <span>â€¢</span>
                    <span>ğŸ“ Ø¨ÙˆØ±ØªØ³ÙˆØ¯Ø§Ù†</span>
                </div>
            </div>
            
            <div class="testimonial">
                <div class="testimonial-icon">ğŸ™</div>
                <div class="testimonial-text">"ÙƒÙ†Øª Ù…Ø³ØªØ³Ù„Ù… Ù„ÙƒÙ† Ø§Ù„Ù†Ø¸Ø§Ù… Ø³Ø§Ø¹Ø¯Ù†ÙŠ Ø£Ù„Ù‚Ø§Ù‡Ø§"</div>
                <div class="testimonial-author">
                    <span>ğŸ‘¤</span>
                    <span class="testimonial-name">Ø®Ø§Ù„Ø¯ Ø¹Ø¨Ø¯Ø§Ù„Ù„Ù‡</span>
                    <span>â€¢</span>
                    <span>ğŸ“ ÙƒØ³Ù„Ø§</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- FAQ -->
    <div class="section">
        <h2 class="section-title">â“ Ø£Ø³Ø¦Ù„Ø© Ø´Ø§Ø¦Ø¹Ø©</h2>
        
        <div class="faq-item" onclick="toggleFaq(this)">
            <div class="faq-question">
                <span>Ù‡Ù„ Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ø¬Ø§Ù†ÙŠØ©ØŸ</span>
                <span class="faq-icon">â–¼</span>
            </div>
            <div class="faq-answer">
                Ù†Ø¹Ù…ØŒ Ø§Ù„Ø®Ø¯Ù…Ø© Ù…Ø¬Ø§Ù†ÙŠØ© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ ÙˆÙ„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙŠ Ø±Ø³ÙˆÙ… Ù…Ø®ÙÙŠØ©
            </div>
        </div>
        
        <div class="faq-item active" onclick="toggleFaq(this)">
            <div class="faq-question">
                <span>ÙƒÙ… ÙŠØ³ØªØºØ±Ù‚ Ø§Ù„Ø¨Ø­Ø«ØŸ</span>
                <span class="faq-icon">â–¼</span>
            </div>
            <div class="faq-answer">
                Ø¹Ø§Ø¯Ø© 24-48 Ø³Ø§Ø¹Ø©ØŒ ÙˆØ³Ù†Ø®Ø·Ø±Ùƒ ÙÙˆØ±Ø§Ù‹ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø©
            </div>
        </div>
        
        <div class="faq-item" onclick="toggleFaq(this)">
            <div class="faq-question">
                <span>Ù…Ø§Ø°Ø§ Ø£Ø­ØªØ§Ø¬ Ù„Ù„ØªØ³Ø¬ÙŠÙ„ØŸ</span>
                <span class="faq-icon">â–¼</span>
            </div>
            <div class="faq-answer">
                Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø³ÙŠ (Ø¢Ø®Ø± 4 Ø£Ø±Ù‚Ø§Ù…) ÙˆØ±Ù‚Ù… ØªÙ„ÙÙˆÙ†Ùƒ ÙÙ‚Ø·
            </div>
        </div>
        
        <div class="faq-item" onclick="toggleFaq(this)">
            <div class="faq-question">
                <span>ÙƒÙŠÙ Ø£Ø«Ø¨Øª Ù…Ù„ÙƒÙŠØ© Ø§Ù„Ø³ÙŠØ§Ø±Ø©ØŸ</span>
                <span class="faq-icon">â–¼</span>
            </div>
            <div class="faq-answer">
                Ø¨ÙˆØ«Ø§Ø¦Ù‚ Ø§Ù„Ù…Ù„ÙƒÙŠØ© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ø¹Ù†Ø¯ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹Ùƒ
            </div>
        </div>
        
        <div class="faq-item" onclick="toggleFaq(this)">
            <div class="faq-question">
                <span>Ù‡Ù„ ØªØ¹Ù…Ù„ÙˆÙ† ÙÙŠ ÙƒÙ„ Ø§Ù„Ù…Ø¯Ù†ØŸ</span>
                <span class="faq-icon">â–¼</span>
            </div>
            <div class="faq-answer">
                Ù†Ø¹Ù…ØŒ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ù†Ø­Ø§Ø¡ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†
            </div>
        </div>
        
        <div class="faq-item" onclick="toggleFaq(this)">
            <div class="faq-question">
                <span>Ù…Ø§Ø°Ø§ Ù„Ùˆ Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ù…Ø§ Ø¸Ù‡Ø±ØªØŸ</span>
                <span class="faq-icon">â–¼</span>
            </div>
            <div class="faq-answer">
                ØªØ¨Ù‚Ù‰ Ù…Ø³Ø¬Ù„Ø© ÙÙŠ Ø§Ù„Ù†Ø¸Ø§Ù… ÙˆÙ†Ø®Ø·Ø±Ùƒ ÙÙˆØ±Ø§Ù‹ Ø¹Ù†Ø¯ Ø¸Ù‡ÙˆØ±Ù‡Ø§ Ù„Ø§Ø­Ù‚Ø§Ù‹
            </div>
        </div>
    </div>
    
    <!-- Privacy -->
    <div class="section">
        <div class="privacy-note">
            <span>ğŸ”’</span>
            <span>Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù…Ø­Ù…ÙŠØ© ÙˆÙ…Ø´ÙØ±Ø© ÙˆÙ„Ù† Ù†Ø´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ø£ÙŠ Ø¬Ù‡Ø©</span>
        </div>
    </div>
</div>

<!-- Footer -->
<div class="footer">
    <div class="footer-content">
        <p style="margin-bottom: 10px;">ØªØ§Ø¨Ø¹Ù†Ø§ Ø¹Ù„Ù‰:</p>
        <a href="https://facebook.com" class="facebook-btn" target="_blank">
            <span class="facebook-icon">f</span>
            <span>ØµÙØ­ØªÙ†Ø§ Ø¹Ù„Ù‰ ÙÙŠØ³Ø¨ÙˆÙƒ</span>
        </a>
        <div class="copyright">
            Â© 2026 Ù†Ø¸Ø§Ù… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©<br>
            Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©
        </div>
    </div>
</div>

<!-- Success Popup -->
<div class="popup-overlay" id="successPopup">
    <div class="popup-box">
        <div class="popup-icon">âœ…</div>
        <h3 class="popup-title">ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø·Ù„Ø¨Ùƒ Ø¨Ù†Ø¬Ø§Ø­!</h3>
        <p class="popup-message">Ø³Ù†Ø®Ø·Ø±Ùƒ ÙÙˆØ± Ø¸Ù‡ÙˆØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø©</p>
        <div class="popup-phone" id="popupPhone">Ø±Ù‚Ù…Ùƒ: 0912345678</div>
        <button class="popup-btn" onclick="closePopup()">Ø­Ø³Ù†Ø§Ù‹</button>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

<script>
// Firebase Configuration

        function convertArabicNums(str){if(!str)return str;const a=['Ù ','Ù¡','Ù¢','Ù£','Ù¤','Ù¥','Ù¦','Ù§','Ù¨','Ù©'],e=['0','1','2','3','4','5','6','7','8','9'];let r=str;for(let i=0;i<10;i++)r=r.replace(new RegExp(a[i],'g'),e[i]);return r}

        const firebaseConfig = {
    apiKey: "AIzaSyDvAx6-priGfzGLh2AlazSkIvsoc0OcW4Q",
    authDomain: "sudancarsrecover.firebaseapp.com",
    projectId: "sudancarsrecover",
    storageBucket: "sudancarsrecover.firebasestorage.app",
    messagingSenderId: "222129422162",
    appId: "1:222129422162:web:c3e8d3c498b53f96afc48b"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

db.enablePersistence({ synchronizeTabs: true }).catch(err => console.log(err));

// Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ù…Ø§Ø±ÙƒØ§Øª ÙˆØ§Ù„Ù…ÙˆØ¯ÙŠÙ„Ø§Øª
const brands = [
    "ØªÙˆÙŠÙˆØªØ§", "Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ", "ÙƒÙŠØ§", "Ù…ÙŠØªØ³ÙˆØ¨ÙŠØ´ÙŠ", "Ù†ÙŠØ³Ø§Ù†", "Ø³ÙˆØ²ÙˆÙƒÙŠ", 
    "ÙÙˆÙ„ÙƒØ³ ÙØ§Ø¬Ù†", "Ù‡ÙˆÙ†Ø¯Ø§", "Ø³ÙƒÙˆØ¯Ø§", "Ø¨ÙŠ ÙˆØ§ÙŠ Ø¯ÙŠ", "ØªØ§ØªØ§", 
    "Ø±Ø£Ø³ Ø´Ø§Ø­Ù†Ø©", "Ø§ÙŠØ³ÙˆØ²Ùˆ", "Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„ÙŠØ§Øª", "Ù…Ø§Ø±ÙƒØ§Øª Ø£Ø®Ø±Ù‰"
];

const models = [
    // ØªÙˆÙŠÙˆØªØ§
    "ÙƒÙˆØ±ÙˆÙ„Ø§", "Ù…ÙˆÙ†ÙƒØ§", "ÙƒØ§Ù…Ø±ÙŠ", "Ù„Ø§Ù†Ø¯ÙƒØ±ÙˆØ²Ø±", "ÙƒØ±ÙˆØ²Ø±", "GXR", "Ø¨Ø±Ø§Ø¯Ùˆ", 
    "ÙÙˆØ±Ø´Ù†Ø±", "Ù‡Ø§ÙŠÙ„ÙˆÙƒØ³", "Ø¨ÙˆÙƒØ³ÙŠ", "Ø¨ÙƒØ³ ØªØ§ÙŠÙˆØªØ§", "ÙŠØ§Ø±Ø³", "Ù‡Ø§ÙŠØ³", "Ø´Ø±ÙŠØ­Ø©", 
    "Ø±Ø§Ù ÙÙˆØ±", "RAV4", "ÙƒÙˆØ³ØªØ±",
    
    // Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ
    "Ø§ÙƒØ³Ù†Øª", "Ù…Ø¶Ù„Ø¹", "Ø¯Ø¨Ø¯ÙˆØ¨", "Ø¬ÙŠØ§Ø¯", "Ø£ÙØ§Ù†ØªÙŠ", "Ø³Ø­Ù„ÙŠØ©", "Ù…Ù†ÙÙˆØ®Ø©", 
    "ÙÙŠØ±Ù†Ø§", "Ø§ÙŠ ØªÙ†", "i10", "Ø·ÙŠÙˆØ± Ø§Ù„Ø¬Ù†Ø©", "Ù‚Ø±Ø§Ù†Ø¯ i10", "ÙƒÙ„Ùƒ", "Ù‚ÙŠØªØ²", 
    "ØªÙˆØ³Ø§Ù†", "Ø³Ù†ØªØ§ÙÙŠ", "Ø³ÙˆÙ†Ø§ØªØ§", "Ø¥Ù„Ù†ØªØ±Ø§", "Ø§Ù„Ù†ØªØ±Ø§", "Ø³ØªØ§Ø±ÙŠÙƒØ³", "Ø§ØªØ´ ÙˆÙ†", 
    "Ø¬Ø±ÙŠØ³", "ÙƒØ±ÙŠØ²", "Ø§ÙŠÙˆÙ†", "Ø§ÙŠ ØªÙˆÙ†ØªÙŠ", "Ø§ÙŠ Ø«ÙŠØ±ØªÙŠ", "i20", "i30", 
    "Ù…Ø§ØªØ±ÙƒØ³", "Ù„Ø§ÙÙŠØªØ§", "Ø¨ÙˆØ±ØªØ± Ù‡ÙŠÙˆÙ†Ø¯Ø§ÙŠ", "Ø§ØªÙˆØ³", "Ø§ØªØ³",
    
    // ÙƒÙŠØ§
    "Ù…ÙˆØ±Ù†ÙŠÙ‚", "Ø¨ÙŠÙƒØ§Ù†ØªÙˆ", "Ø±ÙŠÙˆ", "Ø³ÙŠØ±Ø§ØªÙˆ", "Ø³ÙˆØ±Ù†ØªÙˆ", "Ø³Ø¨ÙˆØ±ØªØ¬", "Ø³Ø¨ÙˆØ±ØªØ§Ø¬",
    "Ø§ÙˆØ¨ØªÙ…Ø§", "ÙÙŠØ³ØªÙˆ", "Ø£Ù…Ø¬Ø§Ø¯", "ÙƒØ±ÙŠØªØ§",
    
    // Ù…ÙŠØªØ³ÙˆØ¨ÙŠØ´ÙŠ
    "Ù„Ø§Ù†Ø³Ø±", "Ø¨ÙˆÙ…Ø©", "Ù‚Ø±Ø´", "Ø¨Ø§Ø¬ÙŠØ±Ùˆ", "Ø§ØªØ±Ø§Ø¬", "Ø§ÙˆØªÙ„Ø§Ù†Ø¯Ø±", "Ù…ÙŠØ±Ø§Ø¬", 
    "L300", "ÙƒØ§Ù†ØªØ±", "Ø¯ÙØ§Ø± Ù…ÙŠØªØ³ÙˆØ¨ÙŠØ´ÙŠ", "Ø¨ÙƒØ³ Ù…ÙŠØªØ³ÙˆØ¨ÙŠØ´ÙŠ",
    
    // Ù†ÙŠØ³Ø§Ù†
    "ØµÙ†ÙŠ", "Ø³Ù†ØªØ±Ø§", "ØªÙŠØ¯Ø§", "Ø¨Ø§ØªØ±ÙˆÙ„", "Ù…ÙˆØ±Ø§Ù†Ùˆ", "Ø§ÙƒØ³ ØªØ±ÙŠÙ„", 
    "Ù„Ø§ÙÙŠÙ†Ø§", "Ø¨ÙŠÙƒ Ø£Ø¨ Ù†ÙŠØ³Ø§Ù†", "Ø¨ÙƒØ³ Ù†ÙŠØ³Ø§Ù†", "Ù‚Ø§Ø´Ù‚Ø§ÙŠ",
    
    // Ø³ÙˆØ²ÙˆÙƒÙŠ
    "Ø£Ù„ØªÙˆ", "Ø§Ù„ØªÙˆ", "ÙÙŠØªØ§Ø±Ø§", "Ø³ÙˆØ²ÙˆÙƒÙŠ ÙØ§Ù†", "Ø£Ù…Ø¬Ø§Ø¯ Ø³ÙˆØ²ÙˆÙƒÙŠ",
    
    // ÙÙˆÙ„ÙƒØ³ ÙØ§Ø¬Ù†
    "Ø¨Ø§Ø³Ø§Øª", "Ø¨ÙˆÙ„Ùˆ", "Ø¨ÙˆØ±Ø§",
    
    // Ù‡ÙˆÙ†Ø¯Ø§
    "Ø³ÙŠÙÙŠÙƒ", "Ø³ÙŠØªÙŠ",
    
    // Ø³ÙƒÙˆØ¯Ø§
    "ÙØ§Ø¨ÙŠØ§", "Ø§ÙˆÙƒØªØ§ÙÙŠØ§", "Ø³ÙŠØ¨Ø±ÙŠÙˆØ±",
    
    // Ø¨ÙŠ ÙˆØ§ÙŠ Ø¯ÙŠ
    "ØµØ§Ù„ÙˆÙ† Ø¨ÙŠ ÙˆØ§ÙŠ Ø¯ÙŠ", "Ø§Ø³ØªÙŠØ´Ù† Ø¨ÙŠ ÙˆØ§ÙŠ Ø¯ÙŠ", "ØªÙƒØ³ÙŠ Ø¨ÙŠ ÙˆØ§ÙŠ Ø¯ÙŠ",
    
    // ØªØ§ØªØ§
    "Ø¨ÙƒØ³ ØªØ§ØªØ§", "Ø¨Øµ ØªØ§ØªØ§", "Ø¯ÙØ§Ø± ØªØ§ØªØ§", "Ø¨ÙˆØ±ØªØ± ØªØ§ØªØ§",
    
    // Ø±Ø£Ø³ Ø´Ø§Ø­Ù†Ø©
    "ÙÙˆÙ„ÙÙˆ", "Ù…Ø±Ø³ÙŠØ¯Ø³ Ø´Ø§Ø­Ù†Ø©", "Ù…Ø§Ù†", "Ù‡ÙŠÙ†Ùˆ", "ØµÙŠÙ†ÙŠ Ø´Ø§Ø­Ù†Ø©", 
    "Ø±ÙŠÙ†Ùˆ Ø´Ø§Ø­Ù†Ø©", "Ø§Ø³ÙƒØ§Ù†ÙŠØ§", "Ø¯Ø§Ù",
    
    // Ø§ÙŠØ³ÙˆØ²Ùˆ
    "Ø¯ÙØ§Ø± Ø§ÙŠØ³ÙˆØ²Ùˆ", "Ø¨ÙƒØ³ Ø§ÙŠØ³ÙˆØ²Ùˆ", "ØµØ§Ù„ÙˆÙ† Ø§ÙŠØ³ÙˆØ²Ùˆ", "Ø§Ø³ØªÙŠØ´Ù† Ø§ÙŠØ³ÙˆØ²Ùˆ",
    
    // Ù…Ø¹Ø¯Ø§Øª ÙˆØ§Ù„ÙŠØ§Øª
    "Ø¨ÙˆÙƒÙ„Ù†", "Ø¯ÙˆØ³Ø§Ù†", "Ø¨Ø§Ø¨ÙˆØ±", "ØªØ±ÙƒØªÙˆØ±", "Ù„ÙˆØ¯Ø±",
    
    // Ù…Ø§Ø±ÙƒØ§Øª Ø£Ø®Ø±Ù‰
    "Ù…Ø±Ø³ÙŠØ¯Ø³", "Ø¨ÙŠ Ø§Ù… Ø¯Ø¨Ù„ÙŠÙˆ", "BMW", "Ø´ÙØ±ÙˆÙ„ÙŠÙ‡", "Ø§Ø³Ø¨Ø§Ø±Ùƒ", 
    "Ø¬ÙŠÙ„ÙŠ", "Ù…Ø§Ø²Ø¯Ø§", "Ø§Ù… Ø¬ÙŠ", "MG", "Ø¯Ø§ÙŠÙˆ", "Ù†ÙˆØ¨ÙŠØ±Ø§", "Ø¯Ø§Ù…Ø§Ø³",
    
    // Ø¹Ø§Ù…Ø©
    "ØµØ§Ù„ÙˆÙ†", "Ø§Ø³ØªÙŠØ´Ù†", "Ø¨ÙƒØ³", "Ø¨ÙˆÙƒØ³ÙŠ", "Ø¯ÙØ§Ø±", "Ø¨Øµ", "Ø­Ø§ÙÙ„Ø©", 
    "Ø±ÙˆØ²Ø§", "Ø±ÙƒØ´Ø©", "Ø´Ø§Ø­Ù†Ø©"
];

let searchType = 'chassis';
let searchCache = new Map();

// ØªØ¨Ø¯ÙŠÙ„ Ù†ÙˆØ¹ Ø§Ù„Ø¨Ø­Ø«
function setSearchType(type) {
    searchType = type;
    
    document.querySelectorAll('.type-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    const numberInput = document.getElementById('numberInput');
    const numberLabel = document.getElementById('numberLabel');
    const helper = document.getElementById('numberHelper');
    
    if (type === 'chassis') {
        numberLabel.textContent = 'Ø£Ø¯Ø®Ù„ Ø¢Ø®Ø± 4 Ø£Ø±Ù‚Ø§Ù… Ù…Ù† Ø§Ù„Ø´Ø§Ø³ÙŠ';
        numberInput.placeholder = '1234';
        numberInput.maxLength = 4;
        numberInput.value = '';
        helper.textContent = 'âš ï¸ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ 4 Ø£Ø±Ù‚Ø§Ù… Ø¨Ø§Ù„Ø¶Ø¨Ø·';
        helper.className = 'helper-text helper-error';
    } else {
        numberLabel.textContent = 'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù„ÙˆØ­Ø©';
        numberInput.placeholder = 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… ÙÙ‚Ø·';
        numberInput.maxLength = 10;
        numberInput.value = '';
        helper.textContent = 'ÙŠÙ…ÙƒÙ† Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙŠ Ø¹Ø¯Ø¯ Ù…Ù† Ø§Ù„Ø£Ø±Ù‚Ø§Ù…';
        helper.className = 'helper-text';
    }
    
    document.getElementById('searchBtn').disabled = true;
}

// Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„
document.getElementById('numberInput').addEventListener('input', (e) => {
    const converted = convertArabicNums(e.target.value); const value = converted.replace(/[^0-9]/g, '');
    e.target.value = value;
    
    const helper = document.getElementById('numberHelper');
    const btn = document.getElementById('searchBtn');
    
    if (searchType === 'chassis') {
        if (value.length < 4) {
            helper.textContent = `âš ï¸ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ 4 Ø£Ø±Ù‚Ø§Ù… (ØªÙ… Ø¥Ø¯Ø®Ø§Ù„ ${value.length})`;
            helper.className = 'helper-text helper-error';
            btn.disabled = true;
        } else {
            helper.textContent = 'âœ… Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¨Ø­Ø«';
            helper.className = 'helper-text helper-success';
            btn.disabled = false;
        }
    } else {
        helper.textContent = 'ÙŠÙ…ÙƒÙ† Ø¥Ø¯Ø®Ø§Ù„ Ø£ÙŠ Ø¹Ø¯Ø¯ Ù…Ù† Ø§Ù„Ø£Ø±Ù‚Ø§Ù…';
        helper.className = 'helper-text';
        btn.disabled = value.length === 0;
    }
});

// Ø§Ù„Ø¨Ø­Ø«
async function startSearch() {
    const number = document.getElementById('numberInput').value.trim();
    const phone = document.getElementById('phoneInput').value.trim();
    
    if (!number || !phone) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        return;
    }
    
    if (searchType === 'chassis' && number.length !== 4) {
        alert('âš ï¸ ÙŠØ¬Ø¨ Ø¥Ø¯Ø®Ø§Ù„ 4 Ø£Ø±Ù‚Ø§Ù… Ù„Ù„Ø´Ø§Ø³ÙŠ Ø¨Ø§Ù„Ø¶Ø¨Ø·');
        return;
    }
    
    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙˆØ¥Ø¸Ù‡Ø§Ø± Loading
    document.getElementById('resultFound').style.display = 'none';
    document.getElementById('resultNotFound').style.display = 'none';
    document.getElementById('loading').style.display = 'block';
    document.getElementById('searchBtn').disabled = true;
    
    try {
        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ø§Ù„ÙƒØ§Ø´ Ø£ÙˆÙ„Ø§Ù‹
        const cacheKey = `${number}_${searchType === 'plate'}`;
        if (searchCache.has(cacheKey)) {
            const cached = searchCache.get(cacheKey);
            displayResult(cached, number, phone);
            return;
        }
        
        // Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Firebase
        const isPlate = searchType === 'plate';
        const snapshot = await db.collection('found_cars')
            .where('chassis_suffix', '==', number)
            .where('is_plate', '==', isPlate)
            .limit(1)
            .get();
        
        // Ø­ÙØ¸ ÙÙŠ Ø§Ù„ÙƒØ§Ø´
        searchCache.set(cacheKey, snapshot);
        
        displayResult(snapshot, number, phone);
        
    } catch (error) {
        console.error('Search error:', error);
        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø¨Ø­Ø«. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    } finally {
        document.getElementById('loading').style.display = 'none';
        document.getElementById('searchBtn').disabled = false;
    }
}

// Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø©
async function displayResult(snapshot, number, phone) {
    if (!snapshot.empty) {
        // ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø³ÙŠØ§Ø±Ø©
        const carData = snapshot.docs[0].data();
        
        const detailsHTML = `
            <div><span class="result-label">Ø§Ù„Ù…Ø§Ø±ÙƒØ©:</span><span class="result-value">${carData.brand}</span></div>
            <div><span class="result-label">Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„:</span><span class="result-value">${carData.model}</span></div>
            <div><span class="result-label">Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø³ÙŠ:</span><span class="result-value">${number}</span></div>
            <div><span class="result-label">Ø±Ù‚Ù…Ùƒ:</span><span class="result-value">${phone}</span></div>
        `;
        
        document.getElementById('carDetails').innerHTML = detailsHTML;
        document.getElementById('resultFound').style.display = 'block';
        
        // Ø­ÙØ¸ ÙÙŠ confirmed_matches
        await db.collection('confirmed_matches').add({
            brand: carData.brand,
            model: carData.model,
            chassis_suffix: number,
            is_plate: searchType === 'plate',
            owner_phone: phone,
            finder_phone: carData.finder_phone,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        
    } else {
        // Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± - Ø¹Ø±Ø¶ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
        document.getElementById('resultNotFound').style.display = 'block';
        
        // ØªØ¹Ø¨Ø¦Ø© Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø³ÙŠ ÙÙŠ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
        document.getElementById('fullChassisInput').value = number;
    }
}

// Auto-complete
function setupAutocomplete(inputId, list) {
    const input = document.getElementById(inputId);
    let currentFocus;
    
    input.addEventListener('input', function() {
        closeAllLists();
        if (!this.value) return;
        
        currentFocus = -1;
        const container = this.parentNode;
        const listDiv = document.createElement('div');
        listDiv.className = 'autocomplete-items';
        container.appendChild(listDiv);
        
        const val = this.value.toLowerCase();
        list.forEach(item => {
            if (item.toLowerCase().includes(val)) {
                const div = document.createElement('div');
                const matchIndex = item.toLowerCase().indexOf(val);
                div.innerHTML = item.substr(0, matchIndex) + 
                               '<strong>' + item.substr(matchIndex, val.length) + '</strong>' +
                               item.substr(matchIndex + val.length);
                div.addEventListener('click', function() {
                    input.value = item;
                    closeAllLists();
                });
                listDiv.appendChild(div);
            }
        });
    });
    
    input.addEventListener('keydown', function(e) {
        let list = this.parentNode.querySelector('.autocomplete-items');
        if (list) list = list.getElementsByTagName('div');
        
        if (e.keyCode === 40) { // Down
            currentFocus++;
            addActive(list);
        } else if (e.keyCode === 38) { // Up
            currentFocus--;
            addActive(list);
        } else if (e.keyCode === 13) { // Enter
            e.preventDefault();
            if (currentFocus > -1 && list) list[currentFocus].click();
        }
    });
    
    function addActive(list) {
        if (!list) return;
        removeActive(list);
        if (currentFocus >= list.length) currentFocus = 0;
        if (currentFocus < 0) currentFocus = list.length - 1;
        list[currentFocus].classList.add('autocomplete-active');
    }
    
    function removeActive(list) {
        for (let i = 0; i < list.length; i++) {
            list[i].classList.remove('autocomplete-active');
        }
    }
    
    function closeAllLists() {
        document.querySelectorAll('.autocomplete-items').forEach(el => el.remove());
    }
    
    document.addEventListener('click', closeAllLists);
}

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨
async function registerRequest() {
    const brand = document.getElementById('brandInput').value.trim();
    const model = document.getElementById('modelInput').value.trim();
    const fullChassis = document.getElementById('fullChassisInput').value.trim();
    const phone = document.getElementById('phoneInput').value.trim();
    
    if (!brand || !model || !fullChassis || !phone) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
        return;
    }
    
    if (fullChassis.length < 4) {
        alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø³ÙŠ (Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 4 Ø£Ø±Ù‚Ø§Ù…)');
        return;
    }
    
    try {
        // ØªØ·Ø¨ÙŠØ¹ Ø±Ù‚Ù… Ø§Ù„Ø´Ø§Ø³ÙŠ
        const suffix = fullChassis.length >= 4 ? fullChassis.slice(-4) : fullChassis.padStart(4, '0');
        
        await db.collection('missing_cars').add({
            brand,
            model,
            chassis_suffix: suffix,
            chassis_full: fullChassis,
            is_plate: searchType === 'plate',
            owner_phone: phone,
            timestamp: firebase.firestore.FieldValue.serverTimestamp()
        });
        
        // Ø¹Ø±Ø¶ Popup
        showSuccessPopup(phone);
        
    } catch (error) {
        console.error('Registration error:', error);
        alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ³Ø¬ÙŠÙ„. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    }
}

// Ø¹Ø±Ø¶ popup Ø§Ù„Ù†Ø¬Ø§Ø­
function showSuccessPopup(phone) {
    document.getElementById('popupPhone').textContent = 'Ø±Ù‚Ù…Ùƒ: ' + phone;
    document.getElementById('successPopup').style.display = 'flex';
}

// Ø¥ØºÙ„Ø§Ù‚ popup ÙˆØ¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„
function closePopup() {
    document.getElementById('successPopup').style.display = 'none';
    location.reload();
}

// Toggle FAQ
function toggleFaq(element) {
    const isActive = element.classList.contains('active');
    
    // Close all
    document.querySelectorAll('.faq-item').forEach(item => {
        item.classList.remove('active');
    });
    
    // Open clicked if it wasn't active
    if (!isActive) {
        element.classList.add('active');
    }
}

// ØªÙ‡ÙŠØ¦Ø© Auto-complete
setupAutocomplete('brandInput', brands);
setupAutocomplete('modelInput', models);

// Open first FAQ by default
document.addEventListener('DOMContentLoaded', () => {
    const firstFaq = document.querySelector('.faq-item.active');
    if (firstFaq) {
        firstFaq.querySelector('.faq-answer').style.maxHeight = '200px';
    }
});
</script>

</body>
</html>
